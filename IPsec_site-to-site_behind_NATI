
set interfaces ethernet eth0 address '172.20.144.21/24'
set interfaces loopback lo address '10.10.10.1/32'
set interfaces tunnel tun0 address '169.250.250.1/30'
set interfaces tunnel tun0 encapsulation 'gre'
set interfaces tunnel tun0 local-ip '10.10.10.1'
set interfaces tunnel tun0 mtu '1436'
set interfaces tunnel tun0 multicast 'disable'
set interfaces tunnel tun0 remote-ip '10.20.20.2'
set interfaces vti vti10 address '169.254.254.10/30'
set interfaces vti vti10 description 'VTI to Vtest CSR'
set interfaces vti vti10 mtu '1300'
set protocols bgp 65550 address-family ipv4-unicast network 172.20.145.0/24
set protocols bgp 65550 address-family ipv4-unicast redistribute static
set protocols bgp 65550 neighbor 169.250.250.2 address-family ipv4-unicast soft-reconfiguration inbound
set protocols bgp 65550 neighbor 169.250.250.2 disable-connected-check
set protocols bgp 65550 neighbor 169.250.250.2 remote-as '65260'
set protocols bgp 65550 neighbor 169.250.250.2 timers holdtime '21'
set protocols bgp 65550 neighbor 169.250.250.2 timers keepalive '7'
set protocols static route 0.0.0.0/0 next-hop 172.20.144.1
set protocols static route 172.20.145.0/24 blackhole distance '255'
set vpn ipsec disable-uniqreqids
set vpn ipsec esp-group GRE-ESP compression 'disable'
set vpn ipsec esp-group GRE-ESP lifetime '3600'
set vpn ipsec esp-group GRE-ESP mode 'tunnel'
set vpn ipsec esp-group GRE-ESP pfs 'enable'
set vpn ipsec esp-group GRE-ESP proposal 1 encryption 'aes256'
set vpn ipsec esp-group GRE-ESP proposal 1 hash 'sha256'
set vpn ipsec ike-group GRE-IKE close-action 'none'
set vpn ipsec ike-group GRE-IKE ikev2-reauth 'no'
set vpn ipsec ike-group GRE-IKE key-exchange 'ikev1'
set vpn ipsec ike-group GRE-IKE lifetime '86400'
set vpn ipsec ike-group GRE-IKE proposal 1 dh-group '14'
set vpn ipsec ike-group GRE-IKE proposal 1 encryption 'aes256'
set vpn ipsec ike-group GRE-IKE proposal 1 hash 'sha256'
set vpn ipsec ipsec-interfaces interface 'eth0'
set vpn ipsec site-to-site peer 3.142.117.25 authentication id '3.208.100.37'
set vpn ipsec site-to-site peer 3.142.117.25 authentication mode 'pre-shared-secret'
set vpn ipsec site-to-site peer 3.142.117.25 authentication pre-shared-secret 'VPN4C@lAmpC0rp'
set vpn ipsec site-to-site peer 3.142.117.25 authentication remote-id '3.142.117.25'
set vpn ipsec site-to-site peer 3.142.117.25 connection-type 'initiate'
set vpn ipsec site-to-site peer 3.142.117.25 default-esp-group 'GRE-ESP'
set vpn ipsec site-to-site peer 3.142.117.25 ike-group 'GRE-IKE'
set vpn ipsec site-to-site peer 3.142.117.25 ikev2-reauth 'inherit'
set vpn ipsec site-to-site peer 3.142.117.25 local-address '172.20.144.21'
# If VTI
#set vpn ipsec site-to-site peer 3.142.117.25 vti bind 'vti10'
#set vpn ipsec site-to-site peer 3.142.117.25 vti esp-group 'GRE-ESP'
## If GRE
##set vpn ipsec site-to-site peer 3.142.117.25 tunnel 0 local prefix '10.10.10.1/32'
##set vpn ipsec site-to-site peer 3.142.117.25 tunnel 0 remote prefix '10.20.20.2/32'
##set vpn ipsec site-to-site peer 3.142.117.25 tunnel 0 allow-nat-networks 'disable'
##set vpn ipsec site-to-site peer 3.142.117.25 tunnel 0 allow-public-networks 'disable'

####################################

set interfaces ethernet eth1 address '10.97.253.11/24'
set interfaces loopback lo address '10.20.20.2/32'
set interfaces tunnel tun0 address '169.250.250.2/30'
set interfaces tunnel tun0 encapsulation 'gre'
set interfaces tunnel tun0 local-ip '10.20.20.2'
set interfaces tunnel tun0 mtu '1436'
set interfaces tunnel tun0 multicast 'disable'
set interfaces tunnel tun0 remote-ip '10.10.10.1'
set interfaces vti vti10 address '169.254.254.9/30'
set protocols bgp 65260 address-family ipv4-unicast network 10.97.252.0/22
set protocols bgp 65260 address-family ipv4-unicast redistribute static
set protocols bgp 65260 neighbor 169.250.250.1 address-family ipv4-unicast soft-reconfiguration inbound
set protocols bgp 65260 neighbor 169.250.250.1 disable-connected-check
set protocols bgp 65260 neighbor 169.250.250.1 remote-as '65550'
set protocols bgp 65260 neighbor 169.250.250.1 timers holdtime '21'
set protocols bgp 65260 neighbor 169.250.250.1 timers keepalive '7'
set protocols static route 0.0.0.0/0 next-hop 10.97.253.1
set protocols static route 10.97.252.0/22 blackhole distance '255'
set vpn ipsec disable-uniqreqids
set vpn ipsec esp-group GRE-ESP compression 'disable'
set vpn ipsec esp-group GRE-ESP lifetime '3600'
set vpn ipsec esp-group GRE-ESP mode 'tunnel'
set vpn ipsec esp-group GRE-ESP pfs 'enable'
set vpn ipsec esp-group GRE-ESP proposal 1 encryption 'aes256'
set vpn ipsec esp-group GRE-ESP proposal 1 hash 'sha256'
set vpn ipsec ike-group GRE-IKE close-action 'none'
set vpn ipsec ike-group GRE-IKE ikev2-reauth 'no'
set vpn ipsec ike-group GRE-IKE key-exchange 'ikev1'
set vpn ipsec ike-group GRE-IKE lifetime '86400'
set vpn ipsec ike-group GRE-IKE proposal 1 dh-group '14'
set vpn ipsec ike-group GRE-IKE proposal 1 encryption 'aes256'
set vpn ipsec ike-group GRE-IKE proposal 1 hash 'sha256'
set vpn ipsec ipsec-interfaces interface 'eth1'
set vpn ipsec site-to-site peer 3.208.100.37 authentication id '3.142.117.25'
set vpn ipsec site-to-site peer 3.208.100.37 authentication mode 'pre-shared-secret'
set vpn ipsec site-to-site peer 3.208.100.37 authentication pre-shared-secret 'VPN4C@lAmpC0rp'
set vpn ipsec site-to-site peer 3.208.100.37 authentication remote-id '3.208.100.37'
set vpn ipsec site-to-site peer 3.208.100.37 connection-type 'initiate'
set vpn ipsec site-to-site peer 3.208.100.37 default-esp-group 'GRE-ESP'
set vpn ipsec site-to-site peer 3.208.100.37 ike-group 'GRE-IKE'
set vpn ipsec site-to-site peer 3.208.100.37 ikev2-reauth 'no'
set vpn ipsec site-to-site peer 3.208.100.37 local-address '10.97.253.11'
# If VTI
#set vpn ipsec site-to-site peer 3.208.100.37 vti bind 'vti10'
#set vpn ipsec site-to-site peer 3.208.100.37 vti esp-group 'GRE-ESP'
## If GRE
##set vpn ipsec site-to-site peer 3.208.100.37 tunnel 0 local prefix '10.20.20.2/32'
##set vpn ipsec site-to-site peer 3.208.100.37 tunnel 0 remote prefix '10.10.10.1/32'
##set vpn ipsec site-to-site peer 3.208.100.37 tunnel 0 allow-nat-networks 'disable'
##set vpn ipsec site-to-site peer 3.208.100.37 tunnel 0 allow-public-networks 'disable'




